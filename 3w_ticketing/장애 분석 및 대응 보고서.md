## 장애 분석 및 대응 보고서
### 1. 서론
> 이번 보고서는 시스템에서 발생한 병목 현상으로 인해 장애가 발생한 원인을 분석하고, 이를 해결하기 위한 대응 조치와 향후 예방 방안을 제시하는 것을 목표로 한다. 병목 현상은 특정 시점에서 시스템의 성능 저하와 응답 시간 증가를 초래하였으며, 이는 사용자 경험에 부정적인 영향을 미쳤다.
<br><br>
### 2. 장애 발생 개요
발생 일시: 2024년 8월 23일, 06:00 - 06:41   
영향 범위: 웹 애플리케이션 사용자, 티켓팅 시스템   
주요 증상:   
- 응답 시간 증가
- 트랜잭션 처리 속도 저하 (TPS 감소)
- 일부 사용자 요청의 타임아웃 발생
장애 유형: 성능 저하로 인한 시스템 병목 현상
<br><br>

### 3. 장애 원인 분석
#### 3.1. 병목 현상 발생 구간
- 응답 시간 분석: 특정 시간대(06:00 - 06:41) 동안 응답 시간이 급격히 증가하였으며, 특히 95th percentile 응답 시간이 높은 상태로 지속되었다. 이는 시스템이 지속적인 부하를 처리하는 데 어려움을 겪었음을 나타낸다.
- TPS 분석: TPS(Transactions Per Second) 지표가 불안정하게 변동하며, 일정 구간에서 급격한 감소가 발생하였다. 이는 시스템이 사용자 요청을 일정하게 처리하지 못했음을 시사한다.
<br>

#### 3.2. 근본 원인
- 데이터베이스 성능 문제
  - 쿼리 최적화 부족: 일부 복잡한 쿼리가 병목을 유발하여 데이터베이스 처리 속도가 저하되었다.
  - 인덱스 미비: 자주 조회되는 테이블에 인덱스가 적절히 설정되지 않아 쿼리 성능이 떨어졌으며, 이로 인해 응답 시간이 증가하였다.
- 시스템 자원 부족:
  - CPU 및 메모리 사용량 포화: 급격히 증가한 사용자 요청으로 인해 CPU 및 메모리 자원이 포화 상태에 이르렀으며, 이는 전체 시스템 성능 저하로 이어졌다.
  - I/O 병목: 디스크 I/O 속도가 느려져 데이터베이스 쿼리 처리 속도에 영향을 미쳤다.
- 애플리케이션 최적화 부족:
  - 비효율적인 코드 경로: 특정 기능에서 비효율적인 코드 경로가 병목을 유발하여 처리 속도가 저하되었다.
  - 비동기 처리 미비: 요청 처리에서 비동기 작업이 제대로 구현되지 않아 동기화 지연이 발생하였다.
<br><br>

### 4. 대응 조치
#### 4.1. 즉각적인 대응
- 서버 자원 확장:
  - CPU 및 메모리 자원을 즉시 확장하여 시스템이 더 많은 부하를 처리할 수 있도록 조치
  - I/O 성능을 향상시키기 위해 SSD 스토리지를 추가 할당
- 데이터베이스 쿼리 최적화:
  - 복잡한 쿼리를 최적화하고, 자주 조회되는 테이블에 인덱스를 추가하여 쿼리 성능을 개선
- 로드 밸런싱 조정:
  - 로드 밸런서를 통해 트래픽을 분산시키고, 특정 서버에 부하가 집중되지 않도록 조치
<br>
   
#### 4.2. 장기적인 예방 조치
- 시스템 모니터링 강화: 실시간 모니터링 도구를 통해 시스템 성능을 지속적으로 감시하고, 병목 현상이 발생할 조짐이 보이면 즉각 대응할 수 있도록 조치
- 애플리케이션 최적화: 비효율적인 코드 경로를 개선하고, 비동기 처리 방식을 도입하여 요청 처리 속도를 최적화
- 데이터베이스 구조 개선: 데이터베이스 테이블 구조를 재검토하고, 쿼리 성능을 지속적으로 분석하여 최적의 성능을 유지할 수 있도록 개선
<br><br>

### 5. 결론 및 향후 계획
이번 장애는 시스템의 자원 한계와 데이터베이스 성능 문제로 인해 발생한 병목 현상에서 기인하였다. 이를 해결하기 위해 즉각적인 자원 확장과 쿼리 최적화 조치를 취하였으며, 장기적인 예방을 위해 시스템 모니터링을 강화하고 애플리케이션 최적화를 지속적으로 추진할 계획이다. 앞으로는 이러한 장애가 재발하지 않도록 시스템의 확장성과 안정성을 지속적으로 점검하고 개선해 나갈 것이다.
